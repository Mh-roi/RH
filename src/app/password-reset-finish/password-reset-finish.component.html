<div
    class="min-vh-90 d-flex justify-content-center align-items-center bg-light"
>
    <div
        class="card shadow-lg border-0 rounded-4 p-4"
        style="max-width: 450px; width: 100%"
    >
        <div class="card-body text-center">
            <h2 class="mb-3 text-primary">
                <i class="pi pi-lock mr-2"></i> Réinitialiser le mot de passe
            </h2>
            <p class="text-muted mb-4">
                Veuillez saisir votre nouveau mot de passe.
            </p>

            <!-- Form -->
            <form [formGroup]="form" (ngSubmit)="onSubmit()">
                <!-- Mot de passe -->
                <div class="mb-3 text-start">
                    <label class="form-label fw-semibold"
                        >Nouveau mot de passe</label
                    >
                    <input
                        type="password"
                        formControlName="password"
                        class="form-control rounded-3"
                        placeholder="Entrez votre nouveau mot de passe"
                        [ngClass]="{
                            'is-invalid':
                                f['password'].touched && f['password'].invalid
                        }"
                    />
                    <div
                        *ngIf="f['password'].touched && f['password'].invalid"
                        class="invalid-feedback"
                    >
                        Mot de passe requis.
                    </div>
                </div>

                <!-- Confirmation -->
                <div class="mb-3 text-start">
                    <label class="form-label fw-semibold"
                        >Confirmer le mot de passe</label
                    >
                    <input
                        type="password"
                        formControlName="confirm_password"
                        class="form-control rounded-3"
                        placeholder="Confirmez le mot de passe"
                        [ngClass]="{
                            'is-invalid':
                                f['confirm_password'].touched &&
                                f['confirm_password'].invalid
                        }"
                    />
                    <div
                        *ngIf="
                            f['confirm_password'].touched &&
                            f['confirm_password'].invalid
                        "
                        class="invalid-feedback"
                    >
                        Confirmation requise.
                    </div>
                    <div
                        *ngIf="form.errors?.['confirmedValidator'] && f['confirm_password'].touched"
                        class="text-danger small"
                    >
                        Les mots de passe ne correspondent pas.
                    </div>
                </div>

                <!-- Messages -->
                <div *ngIf="dialogErrorMessage" class="alert alert-danger py-2">
                    {{ dialogErrorMessage }}
                </div>
                <div *ngIf="isSuccessful" class="alert alert-success py-2">
                    ✅ Votre mot de passe a été réinitialisé avec succès.<br />
                    Redirection vers la <a routerLink="/login">connexion</a>...
                </div>

                <!-- Bouton -->
                <button
                    type="submit"
                    class="btn btn-primary btn-lg w-100 rounded-pill mt-3"
                    [disabled]="form.invalid"
                >
                    <i class="pi pi-check mr-2"></i> Valider
                </button>
            </form>
        </div>
    </div>
</div>
